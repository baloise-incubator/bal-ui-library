import { Story, Canvas, Description } from '@storybook/addon-docs'
import { html } from '../../../stories/utils'
import readme from '../readme.md'
import { Basic } from './bal-table.stories'

<script src="https://cdn.jsdelivr.net/npm/ag-grid-community@29.3.0/dist/ag-grid-community.noStyle.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community@29.3.0/styles/ag-grid.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ag-grid-community@29.3.0/styles/ag-theme-alpine.css" />
<link rel="stylesheet" href="assets/css/design-system-table.css" />

<bal-doc-banner id="story--components-table--basic">Table</bal-doc-banner>

<bal-doc-lead>
  <b>Table</b> is only css and html provided by the bulma framework.
</bal-doc-lead>

[Go to the Bulma documentation](https://bulma.io/documentation/elements/table/)

<Canvas withSource="closed">
  <Story id="components-table--basic" />
</Canvas>

<bal-doc-app>
  <bal-button-group class="mb-large" position="center">
    <a class="button is-primary" href="?path=/story/components-table--basic">
      Go to playground (Canvas)
    </a>
    <bal-doc-code-sandbox framework="angular" template={Basic.parameters.docs.source.code}></bal-doc-code-sandbox>
    <bal-doc-code-sandbox
      framework="html"
      template={Basic.parameters.docs.source.code}
      modules="table,checkbox,button,tag,text"
    ></bal-doc-code-sandbox>
  </bal-button-group>
</bal-doc-app>

## Examples

<span id="story--components-table--ag-grid" style={{ opacity: 0 }}></span>

### AgGrid

For more advanced table layout we recommend to use the library [AG-Grid](https://www.ag-grid.com/).

<Canvas>
  <Story id="components-table--ag-grid" />
</Canvas>

#### Installation

To use the AG-Grid install the following packages:

```
npm install --save @baloise/design-system-components-table ag-grid-community
```

To get the Baloise style import the following stylesheets:

```scss
@import 'ag-grid-community/styles/ag-grid';
@import 'ag-grid-community/styles/ag-theme-alpine';
@import '@baloise/design-system-components-table/css/design-system-table';
```

> **TIP!**
>
> If you do now use `bal-table` as the AG-Grid container,
> please set the class `ag-theme-alpine` to the AG-Grid element to get the Baloise styles.

Follow the further documentation of AG-Grid installation guides:

- for [Javascript](https://www.ag-grid.com/javascript-data-grid/getting-started/)
- for [Angular](https://www.ag-grid.com/angular-data-grid/getting-started/)
- for [React](https://www.ag-grid.com/react-data-grid/getting-started/)
- for [Vue](https://www.ag-grid.com/vue-data-grid/getting-started/)

#### Custom Renderer

The package provides three render functions to use components of the Design System inside the AG-Grid.

##### BalTableButtonRenderer

Renders a button into the grid.

```typescript
import { BalTableButtonRenderer } from '@baloise/design-system-components-table'

...
{
  field: 'button',
  sortable: true,
  filter: true,
  cellRenderer: BalTableButtonRenderer({
    expanded: true,
    icon: 'github',
  }),
},
...
```

The `BalTableButtonRenderer` takes the option object `BalTableButtonRendererOptions` as a parameter.

```typescript
interface BalTableButtonRendererOptions {
  color?: (params: ICellRendererParams) => ColorTypes
  loading?: (params: ICellRendererParams) => boolean
  href?: (params: ICellRendererParams) => string
  icon?: string
  iconRight?: boolean
  square?: boolean
  expanded?: boolean
  outlined?: boolean
  link?: boolean
  target?: '_blank' | ' _parent' | '_self' | '_top'
}
```

##### BalTableTagRenderer

Renders a tag element into the grid.

```typescript
import { BalTableTagRenderer } from '@baloise/design-system-components-table'

...
{
  field: 'tag',
  sortable: true,
  filter: true,
  cellRenderer: BalTableTagRenderer({
    color: params => (params.value === 'Invalid' ? 'danger' : 'success'),
  }),
},
...
```

The `BalTableTagRenderer` takes the option object `BalTableTagRendererOptions` as a parameter.

```typescript
interface BalTableTagRendererOptions {
  color?: (params: ICellRendererParams) => ColorTypes
}
```

##### BalTableTextRenderer

Renders a text into the grid.

```typescript
import { BalTableTextRenderer } from '@baloise/design-system-components-table'

...
{
  field: 'textWithIcon',
  sortable: true,
  filter: true,
  cellRenderer: BalTableTextRenderer({
    icon: params => 'github',
    iconColor: params => 'primary',
  }),
},
...
```

The `BalTableTextRenderer` takes the option object `BalTableTextRendererOptions` as a parameter.

```typescript
interface BalTableTextRendererOptions {
  color?: (params: ICellRendererParams) => ColorTypes
  icon?: (params: ICellRendererParams) => string
  iconColor?: (params: ICellRendererParams) => ColorTypes
  iconRight?: (params: ICellRendererParams) => boolean
}
```

## Component Api

<Description markdown={readme} />

<br />

import theming from './theming.md'

<Description markdown={theming} />

import testing from './testing.md'

<Description markdown={testing} />

<bal-doc-github link="/components/bal-table/stories/bal-table.docs.mdx"></bal-doc-github>
